fileFormatVersion: 2
guid: c1a4c40216cbe2f4e95de0421d2c415f
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: "{\"source\":\"\\\"use strict\\\";\\r\\nObject.defineProperty(exports,
    \\\"__esModule\\\", { value: true });\\r\\nconst UnityEngine_1 = require(\\\"UnityEngine\\\");\\r\\nconst
    ZEPETO_Character_Controller_1 = require(\\\"ZEPETO.Character.Controller\\\");\\r\\nconst
    ZEPETO_Script_1 = require(\\\"ZEPETO.Script\\\");\\r\\nconst ClientStarter_1
    = require(\\\"./ClientStarter\\\");\\r\\nclass AnimationLinker extends ZEPETO_Script_1.ZepetoScriptBehaviour
    {\\r\\n    static get instance() {\\r\\n        return this._instance;\\r\\n   
    }\\r\\n    AddGestureAndPoseClip(clip) {\\r\\n        this.gestures.push(clip);\\r\\n   
    }\\r\\n    Awake() {\\r\\n        this.playingGesture = new Map();\\r\\n       
    AnimationLinker._instance = this;\\r\\n        UnityEngine_1.GameObject.DontDestroyOnLoad(this.gameObject);\\r\\n   
    }\\r\\n    SetInteractorParent(interactButton) {\\r\\n        interactButton.transform.SetParent(this.interactCanvas);\\r\\n   
    }\\r\\n    //Local\uC5D0\uC11C \uC81C\uC2A4\uCC98 \uC2E4\uD589\uD558\uB294 \uD568\uC218\\r\\n   
    PlayGesture(targetClip, isInfinite = false) {\\r\\n        const player = ZEPETO_Character_Controller_1.ZepetoPlayers.instance.LocalPlayer.zepetoPlayer;\\r\\n       
    this.GestureHandler(player, targetClip, isInfinite);\\r\\n        ClientStarter_1.default.instance.SendGesture(targetClip,
    isInfinite);\\r\\n    }\\r\\n    GestureHandler(player, targetClip, isInfinite
    = false) {\\r\\n        ClientStarter_1.default.instance.Debug(`\uC81C\uC2A4\uCC98
    \uC2E4\uD589 \uC5EC\uBD80 - ${this.GetIsGesturing(player.id)}`);\\r\\n       
    // if(this.GetIsGesturing(player.id)) return\\r\\n        ClientStarter_1.default.instance.Debug(`${player.character.gameObject}\uAC00
    \uC81C\uC2A4\uCC98 \uC2E4\uD589 - ${targetClip}, ${isInfinite ? \\\"\uBB34\uD55C\\\"
    : \\\"1\uD68C\uC131\\\"}`);\\r\\n        if (this.GetIsGesturing(player.id))
    {\\r\\n            this.StopGesture(player);\\r\\n        }\\r\\n        const
    clip = this.GetGesture(targetClip);\\r\\n        console.log(clip);\\r\\n       
    if (!clip) {\\r\\n            this.StopGesture(player);\\r\\n        }\\r\\n       
    else {\\r\\n            this.SetisGesture(player.id, clip);\\r\\n           
    player.character.SetGesture(clip);\\r\\n            this.StopAllCoroutines();\\r\\n       
    }\\r\\n    }\\r\\n    StopGesture(player) {\\r\\n        if (this.playingGesture.has(player.id))
    {\\r\\n            this.playingGesture.delete(player.id);\\r\\n        }\\r\\n       
    player.character.CancelGesture();\\r\\n    }\\r\\n    OnRemovePlayer(sessionId)
    {\\r\\n        if (this.playingGesture.has(sessionId)) {\\r\\n            this.playingGesture.delete(sessionId);\\r\\n       
    }\\r\\n    }\\r\\n    GetGesture(gestureName) {\\r\\n        var clip = this.gestures.find((item)
    => {\\r\\n            return item.name == gestureName;\\r\\n        });\\r\\n       
    return clip;\\r\\n    }\\r\\n    GetPlayingGesture(sessionId) {\\r\\n       
    return this.playingGesture.get(sessionId);\\r\\n    }\\r\\n    GetIsGesturing(sessionId)
    {\\r\\n        var isGesture = this.playingGesture.has(sessionId);\\r\\n       
    return isGesture;\\r\\n    }\\r\\n    SetisGesture(sessionId, gesture) {\\r\\n       
    if (this.playingGesture.has(sessionId)) {\\r\\n            ClientStarter_1.default.instance.Debug(\\\"\uC774\uBBF8
    \uAC16\uACE0 \uC788\uC2B5\uB2C8\uB2E4.\\\");\\r\\n        }\\r\\n        this.playingGesture.set(sessionId,
    gesture);\\r\\n    }\\r\\n}\\r\\nexports.default = AnimationLinker;\\r\\n//#
    sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQW5pbWF0aW9uTGlua2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiQW5pbWF0aW9uTGlua2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsNkNBQW1FO0FBQ25FLDZFQUEwRTtBQUMxRSxpREFBc0Q7QUFDdEQsbURBQTRDO0FBRTVDLE1BQXFCLGVBQWdCLFNBQVEscUNBQXFCO0lBU3pELE1BQU0sS0FBSyxRQUFRO1FBQ3hCLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUN4QixDQUFDO0lBRU0scUJBQXFCLENBQUMsSUFBbUI7UUFDOUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDM0IsQ0FBQztJQUVELEtBQUs7UUFDSCxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksR0FBRyxFQUF5QixDQUFDO1FBQ3ZELGVBQWUsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO1FBQ2pDLHdCQUFVLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ2hELENBQUM7SUFFTSxtQkFBbUIsQ0FBQyxjQUEwQjtRQUNuRCxjQUFjLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7SUFDMUQsQ0FBQztJQUVELHFCQUFxQjtJQUNkLFdBQVcsQ0FBQyxVQUFrQixFQUFFLGFBQXNCLEtBQUs7UUFDaEUsTUFBTSxNQUFNLEdBQUcsMkNBQWEsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQztRQUMvRCxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxVQUFVLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFDcEQsdUJBQWEsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUMsQ0FBQztJQUM3RCxDQUFDO0lBRUQsY0FBYyxDQUNaLE1BQW9CLEVBQ3BCLFVBQWtCLEVBQ2xCLGFBQXNCLEtBQUs7UUFFM0IsdUJB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\",\"assetPath\":\"Assets/Scripts/AnimationLinker.ts\",\"manifest\":{\"properties\":[{\"assembly\":\"UnityEngine.AnimationModule\",\"name\":\"gestures\",\"type\":\"UnityEngine.AnimationClip[]\",\"isArray\":true,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[]},{\"assembly\":\"UnityEngine.CoreModule\",\"name\":\"interactCanvas\",\"type\":\"UnityEngine.Transform\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[]}],\"name\":\"AnimationLinker\",\"description\":\"\"},\"isCompiled\":true}"
  typescriptHash: d37af5fb187866375c90519cece4d9e6
  onlyWriteTrigger: 0
