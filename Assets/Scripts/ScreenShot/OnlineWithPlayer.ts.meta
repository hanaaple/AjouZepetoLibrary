fileFormatVersion: 2
guid: bd2f96a634115d440ae987bd2608a8bf
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: "{\"source\":\"\\\"use strict\\\";\\r\\nObject.defineProperty(exports,
    \\\"__esModule\\\", { value: true });\\r\\nconst UnityEngine_1 = require(\\\"UnityEngine\\\");\\r\\nconst
    ZEPETO_Script_1 = require(\\\"ZEPETO.Script\\\");\\r\\nconst OnlineSelfieCamera_1
    = require(\\\"./OnlineSelfieCamera\\\");\\r\\nconst ClientStarter_1 = require(\\\"../ClientStarter\\\");\\r\\nclass
    OnlineWithPlayer extends ZEPETO_Script_1.ZepetoScriptBehaviour {\\r\\n    constructor()
    {\\r\\n        super(...arguments);\\r\\n        this.isWatching = false;\\r\\n       
    this.isTaking = false;\\r\\n        // target\uC5D0 \uB300\uD55C body\uC640 head\uC758
    weight \uC124\uC815\\r\\n        // - head\uAC00 target\uC758 \uC6C0\uC9C1\uC784\uC5D0
    \uB354 \uD06C\uAC8C \uBC18\uC751\uD558\uB3C4\uB85D \uD568\\r\\n        this.bodyWeight
    = 0.3;\\r\\n        this.headWeight = 0.7;\\r\\n        this.rightHandBone =
    \\\"hand_R\\\";\\r\\n    }\\r\\n    Start() {\\r\\n        this.animator = this.GetComponent($typeof(UnityEngine_1.Animator));\\r\\n   
    }\\r\\n    Initialize(cameraPrefab, buttonUIPrefab) {\\r\\n        this.buttonUI
    = UnityEngine_1.GameObject.Instantiate(buttonUIPrefab, buttonUIPrefab.transform.parent).transform;\\r\\n       
    this.buttonUI.gameObject.SetActive(false);\\r\\n        this.cameraTarget =\\r\\n           
    UnityEngine_1.GameObject.Instantiate(cameraPrefab).transform;\\r\\n        let
    selfieCamera = this.cameraTarget.GetComponent($typeof(OnlineSelfieCamera_1.default));\\r\\n       
    this.gripTarget = selfieCamera.GetGripObject().transform;\\r\\n    }\\r\\n   
    SetSelfieStick(player, selfieStickPrefab) {\\r\\n        this.isTaking = true;\\r\\n       
    if (!player.isLocalPlayer) {\\r\\n            this.buttonUI.gameObject.SetActive(true);\\r\\n           
    this.selfieStick =\\r\\n                UnityEngine_1.GameObject.Instantiate(selfieStickPrefab).transform;\\r\\n           
    player.character\\r\\n                .GetComponentsInChildren($typeof(UnityEngine_1.Transform)).forEach((characterObj)
    => {\\r\\n                if (characterObj.name == this.rightHandBone) {\\r\\n                   
    this.selfieStick.parent = characterObj;\\r\\n                    this.selfieStick.localPosition
    = UnityEngine_1.Vector3.zero;\\r\\n                    this.selfieStick.localRotation
    = UnityEngine_1.Quaternion.Euler(UnityEngine_1.Vector3.zero);\\r\\n               
    }\\r\\n            });\\r\\n        }\\r\\n    }\\r\\n    RemovePlayer(player)
    {\\r\\n        this.isTaking = false;\\r\\n        UnityEngine_1.GameObject.Destroy(this.buttonUI.gameObject);\\r\\n       
    UnityEngine_1.GameObject.Destroy(this.cameraTarget.gameObject);\\r\\n       
    if (!player.isLocalPlayer) {\\r\\n            UnityEngine_1.GameObject.Destroy(this.selfieStick.gameObject);\\r\\n           
    this.cameraTarget = null;\\r\\n            this.gripTarget = null;\\r\\n           
    this.selfieStick = null;\\r\\n        }\\r\\n    }\\r\\n    Watch(watchTarget)
    {\\r\\n        if (this.isWatching) {\\r\\n            ClientStarter_1.default.instance.Debug(\\\"\uC774\uBBF8
    \uBCF4\uACE0 \uC788\uC2B5\uB2C8\uB2E4.\\\");\\r\\n        }\\r\\n        else
    {\\r\\n            this.watchTarget = watchTarget;\\r\\n            this.isWatching
    = true;\\r\\n        }\\r\\n    }\\r\\n    StopWatch() {\\r\\n        if (this.isWatching)
    {\\r\\n            this.watchTarget = null;\\r\\n            this.isWatching
    = false;\\r\\n        }\\r\\n        else {\\r\\n            ClientStarter_1.default.instance.Debug(\\\"\uC774\uBBF8
    \uAED0\uC2B5\uB2C8\uB2E4.\\\");\\r\\n        }\\r\\n    }\\r\\n    // \uC720\uC800\uAC00
    \uB85C\uCEEC\uC774 \uC544\uB2CC \uACBD\uC6B0\uC5D0\uB9CC \uC628\uB2E4\\r\\n   
    // \uB85C\uCEEC --> \uC628\uB77C\uC778 \uCE90\uB9AD\uD130 \uC5C5\uB370\uC774\uD2B8\\r\\n   
    OnUpdateOnline(player, screenPos) {\\r\\n        this.buttonUI.position = UnityEngine_1.Vector3.Lerp(this.buttonUI.position,
    screenPos, 0.8);\\r\\n        // ClientStarter.instance.Debug(\\\"\uD558\uC774\\\")\\r\\n       
    // ClientStarter.instance.Debug(this.buttonUI.gameObject.activeSelf)\\r\\n       
    // this.camera.position = this.ParseVector3(takingUser.cameraTransform.position)\\r\\n       
    // \uCC0D\uACE0 \uC788\uB294 \uD50C\uB808\uC774\uC5B4 foreach\\r\\n        const
    takingUser = ClientStarter_1.default.instance\\r\\n            .GetRoom()\\r\\n           
    .State.selfiePlayer.get_Item(player.id);\\r\\n        if (takingUser.cameraTransform
    == null ||\\r\\n            takingUser.cameraTransform == undefined) {\\r\\n           
    ClientStarter_1.default.instance.Debug(`\uC704\uD5D8\uD560 \uBED4 \uD588\uC2B5\uB2C8\uB2E4
    - \uCE74\uBA54\uB77C\uC2A4\uD0A4\uB9C8 transform NULL`);\\r\\n        }\\r\\n       
    else {\\r\\n            // console.log(takingUser.cameraTransform.position)\\r\\n           
    this.cameraTarget.position = this.ParseVector3(takingUser.cameraTransform.position);\\r\\n           
    if (!player.isLocalPlayer) {\\r\\n                player.character.transform.LookAt(new
    UnityEngine_1.Vector3(this.cameraTarget.position.x, player.character.transform.position.y,
    this.cameraTarget.position.z));\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n   
    OnAnimatorIK(layerIndex) {\\r\\n        if (this.isWatching) {\\r\\n           
    this.animator.SetLookAtWeight(1, this.bodyWeight, 0.9);\\r\\n            // lookAt
    target \uC124\uC815\\r\\n            this.animator.SetLookAtPosition(this.watchTarget.position);\\r\\n       
    }\\r\\n        if (this.isTaking) {\\r\\n            this.animator.SetLookAtWeight(1,
    this.bodyWeight, this.headWeight);\\r\\n            // lookAt target \uC124\uC815\\r\\n           
    this.animator.SetLookAtPosition(this.cameraTarget.position);\\r\\n           
    // rightHand\uC758 target weight \uC124\uC815\\r\\n            this.animator.SetIKPositionWeight(UnityEngine_1.AvatarIKGoal.RightHand,
    1);\\r\\n            // rightHand\uAC00 \uBED7\uC744 \uC704\uCE58\uB97C Grip\uC73C\uB85C
    \uC124\uC815\\r\\n            this.animator.SetIKPosition(UnityEngine_1.AvatarIKGoal.RightHand,
    this.gripTarget.position);\\r\\n        }\\r\\n    }\\r\\n    ParseVector3(vector3)
    {\\r\\n        return new UnityEngine_1.Vector3(vector3.x, vector3.y, vector3.z);\\r\\n   
    }\\r\\n}\\r\\nexports.default = OnlineWithPlayer;\\r\\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT25saW5lV2l0aFBsYXllci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIk9ubGluZVdpdGhQbGF5ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw2Q0FPcUI7QUFFckIsaURBQXNEO0FBRXRELDZEQUFzRDtBQUN0RCxvREFBNkM7QUFFN0MsTUFBcUIsZ0JBQWlCLFNBQVEscUNBQXFCO0lBQW5FOztRQVVVLGVBQVUsR0FBWSxLQUFLLENBQUM7UUFDNUIsYUFBUSxHQUFZLEtBQUssQ0FBQztRQUVsQyxtQ0FBbUM7UUFDbkMsb0NBQW9DO1FBQzVCLGVBQVUsR0FBVyxHQUFHLENBQUM7UUFDekIsZUFBVSxHQUFXLEdBQUcsQ0FBQztRQUVoQixrQkFBYSxHQUFXLFFBQVEsQ0FBQztJQW9JcEQsQ0FBQztJQWxJQyxLQUFLO1FBQ0gsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsWUFBWSxTQUFDLHNCQUFRLEVBQUcsQ0FBQztJQUNoRCxDQUFDO0lBRU0sVUFBVSxDQUFDLFlBQXdCLEVBQUUsY0FBMEI7UUFDcEUsSUFBSSxDQUFDLFFBQVEsR0FBRyx3QkFBVSxDQUFDLFdBQVcsQ0FDcEMsY0FBYyxFQUNkLGNBQWMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUNoQyxDQUFDLFNBQVMsQ0FBQztRQUNaLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMxQyxJQUFJLENBQUMsWUFBWTtZQUNmLHdCQUFVLENBQUMsV0FBVyxDQUFhLFlBQVksQ0FBQyxDQUFDLFNBQVMsQ0FBQztRQUM3RCxJQUFJLFlBQVksR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLFlBQVksU0FBQyw0QkFBa0IsRUFBRyxDQUFDO1FBQ3hFLElBQUksQ0FBQyxVQUFVLEdBQUcsWUFBWSxDQUFDLGFBQWEsRUFBRSxDQUFDLFNBQVMsQ0FBQztJQUMzRCxDQUFDO0lBRU0sY0FBYyxDQUFDLE1BQW9CLEVBQUUsaUJBQTZCO1FB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\",\"assetPath\":\"Assets/Scripts/ScreenShot/OnlineWithPlayer.ts\",\"manifest\":{\"properties\":[{\"assembly\":\"UnityEngine.CoreModule\",\"name\":\"buttonUI\",\"type\":\"UnityEngine.Transform\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[]},{\"assembly\":\"UnityEngine.CoreModule\",\"name\":\"cameraTarget\",\"type\":\"UnityEngine.Transform\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[]}],\"name\":\"OnlineWithPlayer\",\"description\":\"\"},\"isCompiled\":true}"
  typescriptHash: fb3a3044967c57a57709d6c1d006299f
  onlyWriteTrigger: 0
